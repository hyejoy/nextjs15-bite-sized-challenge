# 변경 부분 포인트 > 쿼리스트링값 꺼내오기

<!-- component > searchbar.tsx -->

## 클라이언트 컴포넌트

- useSearchParams() 사용

```tsx
const searchParams = useSearchParams(); // 페이지에 전달된 쿼리스트링값을 꺼내오는 기능을 제공
const [search, setSearch] = useState("");

const q = searchParams.get("q"); //q라는 이름의 쿼리스트링을 불러오기
/**
 * ❕ 비교 )
 * - Page Router에서는
 *   router.query.q 이런식으로 불러왔었음
 * - App Router에서는 useSearhParamas() 함수를 이용해 쿼리스트링 가져옴
 */
```

## 서버컴포넌트

- searchParams (props) 사용
<!-- app > (with-searchbar) > search > page.tsx -->

```tsx
import books from "@/mock/books.json";
import BookItem from "@/components/book-item";

export default async function Page({
  searchParams,
}: {
  searchParams: Promise<{ q?: string }>;
}) {
  const { q } = await searchParams;

  return (
    <div>
      {books.map((book) => (
        <BookItem key={book.id} {...book} />
      ))}
    </div>
  );
}
```

## useSearchParams()

- useSearchParams() (Client Component)

```tsx
"use client";
const searchParams = useSearchParams();
const q = searchParams.get("q");
```

- 특징
  └── ✅ 클라이언트 컴포넌트 전용
  └── ✅ React Hook
  └── ✅ 브라우저에서 실행됨
  └──❌ 서버 컴포넌트에서는 사용 불가

- 언제 쓰냐?

  -입력값 변경 ,버튼 클릭 ,즉각적인 UI 반응

- 예시
- 검색창 ,필터 UI ,URL 변경에 따른 클라이언트 상태 반영

## searchParams (Server Component)

```tsx
export default async function Page({
  searchParams,
}: {
  searchParams: Promise<{ q?: string }>;
}) {
  const { q } = await searchParams;
}
```

- 특징
  └──✅ 서버 컴포넌트에서만 사용
  └──✅ 페이지 진입 시 서버에서 한 번 결정
  └──✅ 데이터 패칭과 궁합이 좋음
  └──❌ 브라우저 인터랙션용 아님

- 언제 쓰냐?

  -검색 결과 페이지,필터링된 데이터 SSR, SEO 중요한 페이지

- 예시
  - /search?q=한입
  - 서버에서 q 기준으로 데이터 필터링
